<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.dassa.mapper.UserMapper">

<!-- 	<insert id="regPackage" parameterType="com.dassa.vo.PackageRegVO">
		insert
		into MOVE_PACKAGE_TBL values (
		MOVE_PACKAGE_SEQ.nextval,
		#{packageType},
		#{packageName}, -->
		<select id="selectOneUser" parameterType="userVO" resultType="userVO">
		 select user_idx as userIdx,
				user_id as userId,
				user_pw as userPw,
				user_name as userName,
				user_phone as userPhone,
				user_email as userEmail,
				user_introduce as userIntroduce,
				registration_number as registrationNumber,
				user_car as userCar,
				image_name as userImageName,
				image_path as userImagePath,
				user_type as userType,
				social_id as socialId,
				enroll_date as enrollDate 
		  from user_tbl where user_id=#{userId} and user_pw=#{userPw}
		</select>
	
		<select id="socialLogin" parameterType="userVO" resultType="userVO">
			select user_idx as userIdx,
				   user_id as userId,
				   user_pw as userPw,
				   user_name as userName,
				   addr as userAddr,
				   user_phone as userPhone,
				   user_email as userEmail,
				   user_introduce as userIntroduce,
				   registration_number as registrationNumber,
				   user_car as userCar,
				   image_name as userImageName,
				   image_path as userImagePath,
				   user_type as userType,
				   social_id as socialId,
				   enroll_date as enrollDate
			from user_tbl where social_id=#{socialId}
		</select>
		
		<insert id="commonInsert" parameterType="userVO">
			insert into user_tbl values (
			user_no_seq.nextval,
			<choose>
				<when test="socialId != null">
					#{userId},
					#{userPw},
				</when>
				<otherwise>
					null,
					null,
				</otherwise>
			</choose>
			   #{userName},
			    #{userAddr},
			     #{userPhone},
			      #{userEmail},
			       null,
			        null,
			         null,
			          null,
			           null,
			            #{userType},
			             <choose>
							<when test="#{socialId != null}">
								null,
							</when>
							<otherwise>
								#{socialId},
							</otherwise>
						</choose>
			              default)
		</insert>
</mapper>